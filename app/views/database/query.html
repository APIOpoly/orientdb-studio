<div class="query-container" ng-controller="QueryController">
    <div class="query-header">
        <h5><a href="javascript:void(0)" ng-click="changeQuery()" bs-tooltip="item.query">{{item.query}}</a></h5>
    </div>
    <div class="query-actions bookmarks">

        <a class="ng-binding" href="javascript:void(0)" data-placement="bottom"
           data-title="Add bookmark"
           data-template="views/database/bookmark.html"
           bs-popover>
            <i ng-class="bookIcon"></i>
        </a>
        <a class="ng-binding" href="javascript:void(0)" ng-click="removeItem(item)">
            <i class="fa fa-trash-o"></i>
        </a>
    </div>
    <div class="query-body">
        <div ng-show="current == 'table'">
            <table ng-table="tableParams" show-filter="false"
                   class="table  table-striped table-bordered table-hover table-condensed">
                <thead>
                <tr>
                    <th ng-repeat="header in item.headers">
                        {{header}}
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="result in $data">
                    <td ng-repeat="header in item.headers" ridrender>{{result[header]}}</td>
                </tr>
                </tbody>
            </table>
        </div>

        <div ng-show="current == 'raw'" class="jsonView">
            <div class="row">
                <div jsontext ui-codemirror="viewerOptions" ng-model="item.rawData"
                     style="width: 100%; height: 100px;"></div>
            </div>
        </div>
        <div ng-show="current == 'graph'" class="jsonView">
            <!--<div class="graph-container" ng-graph-query="graphOptions">-->

            <!--</div>-->
            <div class="graph-container" ng-o-graph="graphOptions">

            </div>
        </div>
    </div>
    <div class="query-info">
        <div class="row">
            <div class="col-md-9">
                {{item.notification}}

            </div>
            <div class="col-md-3">
                <ul class="nav nav-pills pull-right" ng-show="item.headers">
                    <li ng-class="{active : current == 'table' }">
                        <a href="javascript:void(0)" ng-click="current = 'table'">Table</a>
                    </li>
                    <li ng-class="{active : current == 'graph' }">
                        <a href="javascript:void(0)" ng-click="current = 'graph'">Graph</a>
                    </li>
                    <li ng-class="{active : current == 'raw' }">
                        <a href="javascript:void(0)" ng-click="current = 'raw'">Raw</a>
                    </li>
                </ul>
            </div>


        </div>
    </div>
</div>
